---
import ThemeProvider from "@/src/components/ThemeProvider.astro";
/**
 * Custom Starlight Head component that injects route-specific CSS
 * and the ThemeProvider for mode/theme management.
 */
import DefaultHead from "@astrojs/starlight/components/Head.astro";

import cssOnlyComponentsCssUrl from "@/src/styles/css-only-components.css?url";
// Import CSS as URLs (not bundled) - Vite emits separate files
import reactComponentsCssUrl from "@/src/styles/react-components.css?url";

const pathname = Astro.url.pathname;
const isReactComponentRoute = pathname.includes("/docs/components/react/");
const isCssOnlyComponentRoute = pathname.includes("/docs/components/css-only/");
---

<DefaultHead {...Astro.props}>
    <slot />
</DefaultHead>

{/* Mode & theme provider - must run early to prevent FOUC */}
<ThemeProvider />

{/* React component docs */}
{
    isReactComponentRoute && (
        <link rel="stylesheet" href={reactComponentsCssUrl} />
    )
}

{/* CSS-only component docs */}
{
    isCssOnlyComponentRoute && (
        <link rel="stylesheet" href={cssOnlyComponentsCssUrl} />
    )
}
