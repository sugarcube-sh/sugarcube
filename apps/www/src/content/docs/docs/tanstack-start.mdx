---
title: TanStack Start
description: How to setup sugarcube with TanStack Start
---

## Create your project

Start by creating a new TanStack Start project if you don't have one set up already:

<PackageManagerTabs command="npm create @tanstack/start@latest" />

## Initialize sugarcube

<PackageManagerTabs command="npx @sugarcube-sh/cli init" />

## With the Vite plugin

If you chose the Vite plugin during `init`, add it to your Vite configuration. **Important**: The sugarcube plugin must run before `tanstackStart()`:

```ts title="vite.config.ts"
// other imports
import sugarcube from "@sugarcube-sh/vite";

export default defineConfig({
    plugins: [
        devtools(),
        nitro(),
        viteTsConfigPaths({
            projects: ["./tsconfig.json"],
        }),
        // sugarcube must run before TanStack Start to process virtual CSS
        sugarcube(),
        tanstackStart(),
        viteReact(),
    ],
    build: {
        // Workaround for UnoCSS multi-environment issue
        // See: https://github.com/unocss/unocss/issues/4990
        outDir: ".output/public",
    },
});
```

Then import the virtual CSS module in your root component:

```tsx title="__root.tsx"
import "virtual:sugarcube.css";
```

If you have additional styles, import them and add to the links array:

```tsx title="__root.tsx"
import appCss from "../styles.css?url";
import "virtual:sugarcube.css";

links: [{ rel: "stylesheet", href: appCss }];
```

## Without the Vite plugin

If you skipped the Vite plugin during init, [generate CSS with the CLI](/docs/reference/cli-commands#generate) and import the files directly:

```tsx title="__root.tsx"
import "./styles/global/tokens.variables.gen.css";
```
